<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@700&display=swap">
    <style>
      a.nav-link, #footer a { color: #C6CBD0; }
      #footer { color: #C6CBD0; font-size: 85%; }
      #phraseContainer {
        font-family: 'Ubuntu mono', monospace;
      }
      #t1, #t2 {
        animation: blink-caret .75s step-end infinite;
        border-right: .1em solid #333;
        display: none;
        left: 3.5em;
        position: absolute;
      }
      @keyframes blink-caret {
        from, to { border-color: transparent }
        50% { border-color: #333; }
      }
      @media (max-width: 768px) {
        #footer div.col-sm { padding-top: 1rem !important; }
      }
      @media (min-width: 768px) {
        #footer div.col-sm { padding-top: 1.5rem !important; }
        .footer-middle { text-align: center; }
        .footer-right { text-align: right; }
      }
    </style>
    <title>David John Passarelli</title>
  </head>
  <body class="bg-dark">
    <nav class="navbar navbar-dark navbar-expand-sm" style="padding:0.5rem 1.5rem;">
      <span class="navbar-brand mb-0 h1" style="color:#C6CBD0;">DAVID JOHN <strong style="color:#E1E2E3;">PASSARELLI</strong></span>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="navbar-menu" class="collapse navbar-collapse justify-content-end">
        <ul class="navbar-nav ">
          <li class="nav-item">
            <a class="nav-link" href="https://dpassarelli.github.io">HOME</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://linkedin.com/in/davidpassarelli">CV</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/dpassarelli">GITHUB</a>
          </li>
        </ul>
      </div>
    </nav>

    <div id="main" class="bg-light container-fluid p-4">
      <div id="phraseContainer">
        <div style="position:relative;">
          <div class="h1">I help</div>
          <div class="h1" id="t1"></div>
          <div class="h1" id="t2"></div>
        </div>
      </div>

      <p class="lead">
        Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Duis mollis, est non commodo luctus.
      </p>

      <p>
        No so lorem ipsum.
      </p>
    </div>

    <div id="footer" class="container-fluid">
      <div class="row">
        <div class="col-sm px-4 text-left">
          &copy; 2020 David Passarelli
          <br/>
          <a href="mailto:dpassarelli@camelotcg.com">dpassarelli@camelotcg.com</a>
          <br />
          973-936-8930
        </div>
        <div class="col-sm px-4 footer-middle">
          Built by hand with <a href="https://getbootstrap.com" style="font-weight:bold;">BS4</a>, <a href="https://www.sublimetext.com" style="font-weight:bold;">ST3</a>, and <a href="https://www.pixelmator.com/mac/" style="font-weight:bold;">PM3</a>.
        </div>
        <div class="col-sm px-4 footer-right">
          Working in partnership with
          <br />
          <img src="media/ccg-logo.svg" title="Camelot Consulting Group, Inc." style="height:100px;margin:-25px 5px;"/>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!--script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script-->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <script type="text/javascript">
      (function () {
        const phrases = [
          'reduce business risk.',
          'improve project outcomes.',
          'modernize workflows.',
          'automate delivery.',
          'streamline deployment.',
          'teach innovation.',
          'build quality in.',
          'enhance team capabilites.',
          'others learn by example.',
          'ensure business continuity.',
          'developers improve their craft.',
          'secure external interfaces.',
          'design useful APIs.',
          'integrate legacy systems.',
          'make practical improvements.',
          'enable DevOps.',
          'transform the development process.',
          'adopt Agile methodologies.',
          'avoid development pitfalls.',
          'software teams deal with change.',
          'implement continuous delivery.',
          'accelerate delivery pipelines.'
        ]

        const displayElements = [
          $('#t1'),
          $('#t2')
        ]

        /**
         * [used description]
         * @type {Object}
         */
        const state = {
          usedPhrases: [],
          nextDisplayElementIndex: 0
        }

        /**
         * [getRandomIndex description]
         * @param  {Array}   list   
         *
         * @return {Number}
         */
        function getRandomIndex (list) {
          return Math.floor(Math.random() * (list.length + 1))
        }

        /**
         * [crossFadePhrases description]
         * @param  {[type]} currentPhraseId [description]
         * @param  {[type]} nextPhraseId    [description]
         * @return {undefined}
         */
        function crossFadePhrases (currentDisplayElement, nextDisplayElement, done) {
          if (currentDisplayElement) {
            currentDisplayElement.fadeOut()
          }

          nextDisplayElement.fadeIn(done)
        }

        function cyclePhrases () {
          // 0. Is there anything left to display?
          if (state.usedPhrases.length === phrases.length) {
            console.log('All phrases have been displayed.')
            return
          }

          // 1. determine currently displayed element
          let currentDisplayElement = displayElements[state.nextDisplayElementIndex]

          // 2. pick next phrase
          let nextPhraseIndex = getRandomIndex(phrases)

          while (state.usedPhrases.indexOf(nextPhraseIndex) > -1) {
            // pick another one, no repeats allowed
            nextPhraseIndex = getRandomIndex(phrases)
          }

          console.log('Next phrase being displayed', nextPhraseIndex)
          state.usedPhrases.push(nextPhraseIndex)

          // 3. pick next display element
          state.nextDisplayElementIndex++

          if (state.nextDisplayElementIndex >= displayElements.length) {
            state.nextDisplayElementIndex = 0 // wrap around to the beginning
          }

          let nextDisplayElement = displayElements[state.nextDisplayElementIndex]

          nextDisplayElement.text(phrases[nextPhraseIndex])

          // 4. call crossFadePhrases after timeout
          window.setTimeout(crossFadePhrases, 3000, currentDisplayElement, nextDisplayElement, cyclePhrases)
        }

        state.usedPhrases.push(getRandomIndex(phrases))
        console.log('Starting phrase index', state.usedPhrases[0])

        displayElements[state.nextDisplayElementIndex].text(phrases[state.usedPhrases[0]])

        // crossFadePhrases(null, displayElements[state.nextDisplayElementIndex], cyclePhrases)
      })()
    </script>
  </body>
</html>
